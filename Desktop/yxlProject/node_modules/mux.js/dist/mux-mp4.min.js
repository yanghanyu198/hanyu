!function t(e,a,i){function n(s,o){if(!a[s]){if(!e[s]){var d="function"==typeof require&&require;if(!o&&d)return d(s,!0);if(r)return r(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var h=a[s]={exports:{}};e[s][0].call(h.exports,function(t){var a=e[s][1][t];return n(a||t)},h,h.exports,t,e,a,i)}return a[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,a){"use strict";var i,n=t(15);i=function(){var t=new Uint8Array,e=0;i.prototype.init.call(this),this.setTimestamp=function(t){e=t},this.parseId3TagSize=function(t,e){var a=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?a+20:a+10},this.parseAdtsSize=function(t,e){var a=(224&t[e+5])>>5,i=t[e+4]<<3;return 6144&t[e+3]|i|a},this.push=function(a){var i,n,r,s,o=0,d=0;for(t.length?(s=t.length,t=new Uint8Array(a.byteLength+s),t.set(t.subarray(0,s)),t.set(a,s)):t=a;t.length-d>=3;)if(t[d]!=="I".charCodeAt(0)||t[d+1]!=="D".charCodeAt(0)||t[d+2]!=="3".charCodeAt(0))if(!0&t[d]&&240==(240&t[d+1])){if(t.length-d<7)break;if((o=this.parseAdtsSize(t,d))>t.length)break;r={type:"audio",data:t.subarray(d,d+o),pts:e,dts:e},this.trigger("data",r),d+=o}else d++;else{if(t.length-d<10)break;if((o=this.parseId3TagSize(t,d))>t.length)break;n={type:"timed-metadata",data:t.subarray(d,d+o)},this.trigger("data",n),d+=o}i=t.length-d,t=i>0?t.subarray(d):new Uint8Array}},i.prototype=new n,e.exports=i},{}],2:[function(t,e,a){"use strict";var i,n=t(15),r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=function(){var t;i.prototype.init.call(this),this.push=function(e){var a,i,n,s,o,d,p=0,h=0;if("audio"===e.type)for(t?(s=t,t=new Uint8Array(s.byteLength+e.data.byteLength),t.set(s),t.set(e.data,s.byteLength)):t=e.data;p+5<t.length;)if(255===t[p]&&240==(246&t[p+1])){if(i=2*(1&~t[p+1]),a=(3&t[p+3])<<11|t[p+4]<<3|(224&t[p+5])>>5,o=1024*(1+(3&t[p+6])),d=9e4*o/r[(60&t[p+2])>>>2],n=p+a,t.byteLength<n)return;if(this.trigger("data",{pts:e.pts+h*d,dts:e.dts+h*d,sampleCount:o,audioobjecttype:1+(t[p+2]>>>6&3),channelcount:(1&t[p+2])<<2|(192&t[p+3])>>>6,samplerate:r[(60&t[p+2])>>>2],samplingfrequencyindex:(60&t[p+2])>>>2,samplesize:16,data:t.subarray(p+7+i,n)}),t.byteLength===n)return void(t=void 0);h++,t=t.subarray(n)}else p++},this.flush=function(){this.trigger("done")}},i.prototype=new n,e.exports=i},{}],3:[function(t,e,a){"use strict";var i,n,r,s=t(15),o=t(14);n=function(){var t,e,a=0;n.prototype.init.call(this),this.push=function(i){var n;for(e?(n=new Uint8Array(e.byteLength+i.data.byteLength),n.set(e),n.set(i.data,e.byteLength),e=n):e=i.data;a<e.byteLength-3;a++)if(1===e[a+2]){t=a+5;break}for(;t<e.byteLength;)switch(e[t]){case 0:if(0!==e[t-1]){t+=2;break}if(0!==e[t-2]){t++;break}a+3!==t-2&&this.trigger("data",e.subarray(a+3,t-2));do{t++}while(1!==e[t]&&t<e.length);a=t-2,t+=3;break;case 1:if(0!==e[t-1]||0!==e[t-2]){t+=3;break}this.trigger("data",e.subarray(a+3,t-2)),a=t-2,t+=3;break;default:t+=3}e=e.subarray(a),t-=a,a=0},this.flush=function(){e&&e.byteLength>3&&this.trigger("data",e.subarray(a+3)),e=null,a=0,this.trigger("done")}},n.prototype=new s,r={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},i=function(){var t,e,a,s,d,p,h,u=new n;i.prototype.init.call(this),t=this,this.push=function(t){"video"===t.type&&(e=t.trackId,a=t.pts,s=t.dts,u.push(t))},u.on("data",function(i){var n={trackId:e,pts:a,dts:s,data:i};switch(31&i[0]){case 5:n.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:n.nalUnitType="sei_rbsp",n.escapedRBSP=d(i.subarray(1));break;case 7:n.nalUnitType="seq_parameter_set_rbsp",n.escapedRBSP=d(i.subarray(1)),n.config=p(n.escapedRBSP);break;case 8:n.nalUnitType="pic_parameter_set_rbsp";break;case 9:n.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",n)}),u.on("done",function(){t.trigger("done")}),this.flush=function(){u.flush()},h=function(t,e){var a,i,n=8,r=8;for(a=0;a<t;a++)0!==r&&(i=e.readExpGolomb(),r=(n+i+256)%256),n=0===r?n:r},d=function(t){for(var e,a,i=t.byteLength,n=[],r=1;r<i-2;)0===t[r]&&0===t[r+1]&&3===t[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return t;e=i-n.length,a=new Uint8Array(e);var s=0;for(r=0;r<e;s++,r++)s===n[0]&&(s++,n.shift()),a[r]=t[s];return a},p=function(t){var e,a,i,n,s,d,p,u,c,l,m,f,g,y=0,S=0,b=0,v=0,T=1;if(e=new o(t),a=e.readUnsignedByte(),n=e.readUnsignedByte(),i=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),r[a]&&(s=e.readUnsignedExpGolomb(),3===s&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(m=3!==s?8:12,g=0;g<m;g++)e.readBoolean()&&(g<6?h(16,e):h(64,e));if(e.skipUnsignedExpGolomb(),0===(d=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===d)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),p=e.readUnsignedExpGolomb(),g=0;g<p;g++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),u=e.readUnsignedExpGolomb(),c=e.readUnsignedExpGolomb(),l=e.readBits(1),0===l&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(y=e.readUnsignedExpGolomb(),S=e.readUnsignedExpGolomb(),b=e.readUnsignedExpGolomb(),v=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:f=[1,1];break;case 2:f=[12,11];break;case 3:f=[10,11];break;case 4:f=[16,11];break;case 5:f=[40,33];break;case 6:f=[24,11];break;case 7:f=[20,11];break;case 8:f=[32,11];break;case 9:f=[80,33];break;case 10:f=[18,11];break;case 11:f=[15,11];break;case 12:f=[64,33];break;case 13:f=[160,99];break;case 14:f=[4,3];break;case 15:f=[3,2];break;case 16:f=[2,1];break;case 255:f=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}f&&(T=f[0]/f[1])}return{profileIdc:a,levelIdc:i,profileCompatibility:n,width:Math.ceil((16*(u+1)-2*y-2*S)*T),height:(2-l)*(c+1)*16-2*b-2*v}}},i.prototype=new s,e.exports={H264Stream:i,NalByteStream:n}},{}],4:[function(t,e,a){var i=[33,16,5,32,164,27],n=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],r=function(t){for(var e=[];t--;)e.push(0);return e},s={96e3:[i,[227,64],r(154),[56]],88200:[i,[231],r(170),[56]],64e3:[i,[248,192],r(240),[56]],48e3:[i,[255,192],r(268),[55,148,128],r(54),[112]],44100:[i,[255,192],r(268),[55,163,128],r(84),[112]],32e3:[i,[255,192],r(268),[55,234],r(226),[112]],24e3:[i,[255,192],r(268),[55,255,128],r(268),[111,112],r(126),[224]],16e3:[i,[255,192],r(268),[55,255,128],r(268),[111,255],r(269),[223,108],r(195),[1,192]],12e3:[n,r(268),[3,127,248],r(268),[6,255,240],r(268),[13,255,224],r(268),[27,253,128],r(259),[56]],11025:[n,r(268),[3,127,248],r(268),[6,255,240],r(268),[13,255,224],r(268),[27,255,192],r(268),[55,175,128],r(108),[112]],8e3:[n,r(268),[3,121,16],r(47),[7]]};e.exports=function(t){return Object.keys(t).reduce(function(e,a){return e[a]=new Uint8Array(t[a].reduce(function(t,e){return t.concat(e)},[])),e},{})}(s)},{}],5:[function(t,e,a){"use strict";var i=t(15),n=function(t){for(var e=0,a={payloadType:-1,payloadSize:0},i=0,n=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)i+=255,e++;for(i+=t[e++];255===t[e];)n+=255,e++;if(n+=t[e++],!a.payload&&4===i){a.payloadType=i,a.payloadSize=n,a.payload=t.subarray(e,e+n);break}e+=n,i=0,n=0}return a},r=function(t){return 181!==t.payload[0]?null:49!=(t.payload[1]<<8|t.payload[2])?null:"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])?null:3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},s=function(t,e){var a,i,n,r,s=[];if(!(64&e[0]))return s;for(i=31&e[0],a=0;a<i;a++)n=3*a,r={type:3&e[n+2],pts:t},4&e[n+2]&&(r.ccData=e[n+3]<<8|e[n+4],s.push(r));return s},o=function(){o.prototype.init.call(this),this.captionPackets_=[],this.field1_=new u,this.field1_.on("data",this.trigger.bind(this,"data")),this.field1_.on("done",this.trigger.bind(this,"done"))};o.prototype=new i,o.prototype.push=function(t){var e,a;"sei_rbsp"===t.nalUnitType&&(e=n(t.escapedRBSP),4===e.payloadType&&(a=r(e))&&(this.captionPackets_=this.captionPackets_.concat(s(t.pts,a))))},o.prototype.flush=function(){if(!this.captionPackets_.length)return void this.field1_.flush();this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(this.field1_.push,this.field1_),this.captionPackets_.length=0,this.field1_.flush()};var d={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608},p=function(t){return null===t?"":(t=d[t]||t,String.fromCharCode(t))},h=function(){for(var t=[],e=15;e--;)t.push("");return t},u=function(){u.prototype.init.call(this),this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=h(),this.nonDisplayed_=h(),this.lastControlCode_=null,this.push=function(t){if(0===t.type){var e,a,i,n;if((e=32639&t.ccData)===this.lastControlCode_)return void(this.lastControlCode_=null);switch(this.lastControlCode_=4096==(61440&e)?e:null,e){case 0:break;case 5152:this.mode_="popOn";break;case 5167:this.flushDisplayed(t.pts),a=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=a,this.startPts_=t.pts;break;case 5157:this.topRow_=13,this.mode_="rollUp";break;case 5158:this.topRow_=12,this.mode_="rollUp";break;case 5159:this.topRow_=11,this.mode_="rollUp";break;case 5165:this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;break;case 5153:"popOn"===this.mode_?this.nonDisplayed_[14]=this.nonDisplayed_[14].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1);break;case 5164:this.flushDisplayed(t.pts),this.displayed_=h();break;case 5166:this.nonDisplayed_=h();break;default:if(i=e>>>8,n=255&e,i>=16&&i<=23&&n>=64&&n<=127&&(16!==i||n<96)&&(i=32,n=null),(17===i||25===i)&&n>=48&&n<=63&&(i=9834,n=""),16==(240&i))return;0===i&&(i=null),0===n&&(n=null),this[this.mode_](t.pts,i,n)}}}};u.prototype=new i,u.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){return t.trim()}).filter(function(t){return t.length}).join("\n");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e})},u.prototype.popOn=function(t,e,a){var i=this.nonDisplayed_[14];i+=p(e),i+=p(a),this.nonDisplayed_[14]=i},u.prototype.rollUp=function(t,e,a){var i=this.displayed_[14];""===i&&(this.flushDisplayed(t),this.startPts_=t),i+=p(e),i+=p(a),this.displayed_[14]=i},u.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.topRow_;t<14;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[14]=""},e.exports={CaptionStream:o,Cea608Stream:u}},{}],6:[function(t,e,a){"use strict";var i,n,r,s=t(15),o=t(5),d=t(8),p=t(9).TimestampRolloverStream,h=t(8);i=function(){var t=new Uint8Array(188),e=0;i.prototype.init.call(this),this.push=function(a){var i,n=0,r=188;for(e?(i=new Uint8Array(a.byteLength+e),i.set(t.subarray(0,e)),i.set(a,e),e=0):i=a;r<i.byteLength;)71!==i[n]||71!==i[r]?(n++,r++):(this.trigger("data",i.subarray(n,r)),n+=188,r+=188);n<i.byteLength&&(t.set(i.subarray(n),0),e=i.byteLength-n)},this.flush=function(){188===e&&71===t[0]&&(this.trigger("data",t),e=0),this.trigger("done")}},i.prototype=new s,n=function(){var t,e,a,i;n.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,i){var n=0;i.payloadUnitStartIndicator&&(n+=t[n]+1),"pat"===i.type?e(t.subarray(n),i):a(t.subarray(n),i)},e=function(t,e){e.section_number=t[7],e.last_section_number=t[8],i.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=i.pmtPid},a=function(t,e){var a,n,r,s;if(1&t[5]){for(i.programMapTable={},a=(15&t[1])<<8|t[2],n=3+a-4,r=(15&t[10])<<8|t[11],s=12+r;s<n;)i.programMapTable[(31&t[s+1])<<8|t[s+2]]=t[s],s+=5+((15&t[s+3])<<8|t[s+4]);for(e.programMapTable=i.programMapTable;i.packetsWaitingForPmt.length;)i.processPes_.apply(i,i.packetsWaitingForPmt.shift())}},this.push=function(e){var a={},i=4;a.payloadUnitStartIndicator=!!(64&e[1]),a.pid=31&e[1],a.pid<<=8,a.pid|=e[2],(48&e[3])>>>4>1&&(i+=e[i]+1),0===a.pid?(a.type="pat",t(e.subarray(i),a),this.trigger("data",a)):a.pid===this.pmtPid?(a.type="pmt",t(e.subarray(i),a),this.trigger("data",a)):void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,i,a]):this.processPes_(e,i,a)},this.processPes_=function(t,e,a){a.streamType=this.programMapTable[a.pid],a.type="pes",a.data=t.subarray(e),this.trigger("data",a)}},n.prototype=new s,n.STREAM_TYPES={h264:27,adts:15},r=function(){var t=this,e={data:[],size:0},a={data:[],size:0},i={data:[],size:0},n=function(t,e){var a;e.dataAlignmentIndicator=0!=(4&t[6]),a=t[7],192&a&&(e.pts=(14&t[9])<<27|(255&t[10])<<20|(254&t[11])<<12|(255&t[12])<<5|(254&t[13])>>>3,e.pts*=4,e.pts+=(6&t[13])>>>1,e.dts=e.pts,64&a&&(e.dts=(14&t[14])<<27|(255&t[15])<<20|(254&t[16])<<12|(255&t[17])<<5|(254&t[18])>>>3,e.dts*=4,e.dts+=(6&t[18])>>>1)),e.data=t.subarray(9+t[8])},s=function(e,a){var i,r=new Uint8Array(e.size),s={type:a},o=0;if(e.data.length){for(s.trackId=e.data[0].pid;e.data.length;)i=e.data.shift(),r.set(i.data,o),o+=i.data.byteLength;n(r,s),e.size=0,t.trigger("data",s)}};r.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var t,r;switch(n.streamType){case d.H264_STREAM_TYPE:case h.H264_STREAM_TYPE:t=e,r="video";break;case d.ADTS_STREAM_TYPE:t=a,r="audio";break;case d.METADATA_STREAM_TYPE:t=i,r="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&s(t,r),t.data.push(n),t.size+=n.data.byteLength},pmt:function(){var e,a,i={type:"metadata",tracks:[]},r=n.programMapTable;for(e in r)r.hasOwnProperty(e)&&(a={timelineStartInfo:{baseMediaDecodeTime:0}},a.id=+e,r[e]===h.H264_STREAM_TYPE?(a.codec="avc",a.type="video"):r[e]===h.ADTS_STREAM_TYPE&&(a.codec="adts",a.type="audio"),i.tracks.push(a));t.trigger("data",i)}})[n.type]()},this.flush=function(){s(e,"video"),s(a,"audio"),s(i,"timed-metadata"),this.trigger("done")}},r.prototype=new s;var u={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:i,TransportParseStream:n,ElementaryStream:r,TimestampRolloverStream:p,CaptionStream:o.CaptionStream,Cea608Stream:o.Cea608Stream,MetadataStream:t(7)};for(var c in d)d.hasOwnProperty(c)&&(u[c]=d[c]);e.exports=u},{}],7:[function(t,e,a){"use strict";var i,n=t(15),r=t(8),s=function(t,e,a){var i,n="";for(i=e;i<a;i++)n+="%"+("00"+t[i].toString(16)).slice(-2);return n},o=function(t,e,a){return decodeURIComponent(s(t,e,a))},d=function(t,e,a){return unescape(s(t,e,a))},p=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},h={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=o(t.data,1,e),t.value=o(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=o(t.data,1,e),t.url=o(t.data,e+1,t.data.length);break}},PRIV:function(t){var e;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=d(t.data,0,e);break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};i=function(t){var e,a={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},n=0,s=[],o=0;if(i.prototype.init.call(this),this.dispatchType=r.METADATA_STREAM_TYPE.toString(16),a.descriptor)for(e=0;e<a.descriptor.length;e++)this.dispatchType+=("00"+a.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,i,r,d,u,c;if("timed-metadata"===t.type){if(t.dataAlignmentIndicator&&(o=0,s.length=0),0===s.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))return void(a.debug&&console.log("Skipping unrecognized metadata packet"));if(s.push(t),o+=t.data.byteLength,1===s.length&&(n=p(t.data.subarray(6,10)),n+=10),!(o<n)){for(e={data:new Uint8Array(n),frames:[],pts:s[0].pts,dts:s[0].dts},u=0;u<n;)e.data.set(s[0].data.subarray(0,n-u),u),u+=s[0].data.byteLength,o-=s[0].data.byteLength,s.shift();i=10,64&e.data[5]&&(i+=4,i+=p(e.data.subarray(10,14)),n-=p(e.data.subarray(16,20)));do{if((r=p(e.data.subarray(i+4,i+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if(c=String.fromCharCode(e.data[i],e.data[i+1],e.data[i+2],e.data[i+3]),d={id:c,data:e.data.subarray(i+10,i+r+10)},d.key=d.id,h[d.id]&&(h[d.id](d),"com.apple.streaming.transportStreamTimestamp"===d.owner)){var l=d.data,m=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;m*=4,m+=3&l[7],d.timeStamp=m,void 0===e.pts&&void 0===e.dts&&(e.pts=d.timeStamp,e.dts=d.timeStamp),this.trigger("timestamp",d)}e.frames.push(d),i+=10,i+=r}while(i<n);this.trigger("data",e)}}}},i.prototype=new n,e.exports=i},{}],8:[function(t,e,a){"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],9:[function(t,e,a){"use strict";var i=t(15),n=function(t,e){var a=1;for(t>e&&(a=-1);Math.abs(e-t)>4294967296;)t+=8589934592*a;return t},r=function(t){var e,a;r.prototype.init.call(this),this.type_=t,this.push=function(t){t.type===this.type_&&(void 0===a&&(a=t.dts),t.dts=n(t.dts,a),t.pts=n(t.pts,a),e=t.dts,this.trigger("data",t))},this.flush=function(){a=e,this.trigger("done")},this.discontinuity=function(){a=void 0,e=void 0}};r.prototype=new i,e.exports={TimestampRolloverStream:r,handleRollover:n}},{}],10:[function(t,e,a){e.exports={generator:t(11),Transmuxer:t(12).Transmuxer,AudioSegmentStream:t(12).AudioSegmentStream,VideoSegmentStream:t(12).VideoSegmentStream}},{}],11:[function(t,e,a){"use strict";var i,n,r,s,o,d,p,h,u,c,l,m,f,g,y,S,b,v,T,_,k,w,A,x,U,P,D,M,L,C,E,I,R,B,O,z,G=Math.pow(2,32)-1;!function(){var t;if(A={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in A)A.hasOwnProperty(t)&&(A[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);x=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),P=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),U=new Uint8Array([0,0,0,1]),D=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),M=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),L={video:D,audio:M},I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0]),R=new Uint8Array([0,0,0,0,0,0,0,0]),B=R,O=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),z=R,C=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),i=function(t){var e,a,i,n=[],r=0;for(e=1;e<arguments.length;e++)n.push(arguments[e]);for(e=n.length;e--;)r+=n[e].byteLength;for(a=new Uint8Array(r+8),i=new DataView(a.buffer,a.byteOffset,a.byteLength),i.setUint32(0,a.byteLength),a.set(t,4),e=0,r=8;e<n.length;e++)a.set(n[e],r),r+=n[e].byteLength;return a},n=function(){return i(A.dinf,i(A.dref,I))},r=function(t){return i(A.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},s=function(){return i(A.ftyp,x,U,x,P)},S=function(t){return i(A.hdlr,L[t])},o=function(t){return i(A.mdat,t)},y=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(e[12]=t.samplerate>>>24&255,e[13]=t.samplerate>>>16&255,e[14]=t.samplerate>>>8&255,e[15]=255&t.samplerate),i(A.mdhd,e)},g=function(t){return i(A.mdia,y(t),S(t.type),p(t))},d=function(t){return i(A.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},p=function(t){return i(A.minf,"video"===t.type?i(A.vmhd,C):i(A.smhd,E),n(),v(t))},h=function(t,e){for(var a=[],n=e.length;n--;)a[n]=_(e[n]);return i.apply(null,[A.moof,d(t)].concat(a))},u=function(t){for(var e=t.length,a=[];e--;)a[e]=m(t[e]);return i.apply(null,[A.moov,l(4294967295)].concat(a).concat(c(t)))},c=function(t){for(var e=t.length,a=[];e--;)a[e]=k(t[e]);return i.apply(null,[A.mvex].concat(a))},l=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return i(A.mvhd,e)},b=function(t){var e,a,n=t.samples||[],r=new Uint8Array(4+n.length);for(a=0;a<n.length;a++)e=n[a].flags,r[a+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return i(A.sdtp,r)},v=function(t){return i(A.stbl,T(t),i(A.stts,z),i(A.stsc,B),i(A.stsz,O),i(A.stco,R))},function(){var t,e;T=function(a){return i(A.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===a.type?t(a):e(a))},t=function(t){var e,a=t.sps||[],n=t.pps||[],r=[],s=[];for(e=0;e<a.length;e++)r.push((65280&a[e].byteLength)>>>8),r.push(255&a[e].byteLength),r=r.concat(Array.prototype.slice.call(a[e]));for(e=0;e<n.length;e++)s.push((65280&n[e].byteLength)>>>8),s.push(255&n[e].byteLength),s=s.concat(Array.prototype.slice.call(n[e]));return i(A.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i(A.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([a.length]).concat(r).concat([n.length]).concat(s))),i(A.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},e=function(t){return i(A.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),r(t))}}(),f=function(t){var e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return i(A.tkhd,e)},_=function(t){var e,a,n,r,s,o,d;return e=i(A.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(t.baseMediaDecodeTime/(G+1)),d=Math.floor(t.baseMediaDecodeTime%(G+1)),a=i(A.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,d>>>24&255,d>>>16&255,d>>>8&255,255&d])),s=92,"audio"===t.type?(n=w(t,s),i(A.traf,e,a,n)):(r=b(t),n=w(t,r.length+s),i(A.traf,e,a,n,r))},m=function(t){return t.duration=t.duration||4294967295,i(A.trak,f(t),g(t))},k=function(t){var e=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(e[e.length-1]=0),i(A.trex,e)},function(){var t,e,a;a=function(t,e){var a=0,i=0,n=0,r=0;return t.length&&(void 0!==t[0].duration&&(a=1),void 0!==t[0].size&&(i=2),void 0!==t[0].flags&&(n=4),void 0!==t[0].compositionTimeOffset&&(r=8)),[0,0,a|i|n|r,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},e=function(t,e){var n,r,s,o;for(r=t.samples||[],e+=20+16*r.length,n=a(r,e),o=0;o<r.length;o++)s=r[o],n=n.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size,s.flags.isLeading<<2|s.flags.dependsOn,s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,61440&s.flags.degradationPriority,15&s.flags.degradationPriority,(4278190080&s.compositionTimeOffset)>>>24,(16711680&s.compositionTimeOffset)>>>16,(65280&s.compositionTimeOffset)>>>8,255&s.compositionTimeOffset]);return i(A.trun,new Uint8Array(n))},t=function(t,e){var n,r,s,o;for(r=t.samples||[],e+=20+8*r.length,n=a(r,e),o=0;o<r.length;o++)s=r[o],n=n.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size]);return i(A.trun,new Uint8Array(n))},w=function(a,i){return"audio"===a.type?t(a,i):e(a,i)}}(),e.exports={ftyp:s,mdat:o,moof:h,moov:u,initSegment:function(t){var e,a=s(),i=u(t);return e=new Uint8Array(a.byteLength+i.byteLength),e.set(a),e.set(i,a.byteLength),e}}},{}],12:[function(t,e,a){"use strict";var i,n,r,s,o,d,p,h,u,c,l,m=t(15),f=t(11),g=t(6),y=t(2),S=t(3).H264Stream,b=t(1),v=t(4),T=t(13),_=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],k=["width","height","profileIdc","levelIdc","profileCompatibility"];o=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}},d=function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)},c=function(t,e){var a;if(t.length!==e.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==e[a])return!1;return!0},l=function(t){var e,a,i=0;for(e=0;e<t.length;e++)a=t[e],i+=a.data.byteLength;return i},n=function(t){var e=[],a=0,i=0,r=0,s=1/0;n.prototype.init.call(this),this.push=function(a){p(t,a),t&&_.forEach(function(e){t[e]=a[e]}),e.push(a)},this.setEarliestDts=function(e){i=e-t.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){s=t},this.setAudioAppendStart=function(t){r=t},this.flush=function(){var i,n,r,s;if(0===e.length)return void this.trigger("done","AudioSegmentStream");i=this.trimAdtsFramesByEarliestDts_(e),t.baseMediaDecodeTime=u(t),this.prefixWithSilence_(t,i),t.samples=this.generateSampleTable_(i),r=f.mdat(this.concatenateFrameData_(i)),e=[],n=f.moof(a,[t]),s=new Uint8Array(n.byteLength+r.byteLength),a++,s.set(n),s.set(r,n.byteLength),h(t),this.trigger("data",{track:t,boxes:s}),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(t,e){var a,i,n,o=0,d=0,p=0,h=0;if(e.length&&(a=T.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate),o=Math.ceil(9e4/(t.samplerate/1024)),r&&s&&(d=a-Math.max(r,s),p=Math.floor(d/o),h=p*o),!(p<1||h>45e3))){for(i=v[t.samplerate],i||(i=e[0].data),n=0;n<p;n++)e.splice(n,0,{data:i});t.baseMediaDecodeTime-=Math.floor(T.videoTsToAudioTs(h,t.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(e){return t.minSegmentDts>=i?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=i&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},this.generateSampleTable_=function(t){var e,a,i=[];for(e=0;e<t.length;e++)a=t[e],i.push({size:a.data.byteLength,duration:1024});return i},this.concatenateFrameData_=function(t){var e,a,i=0,n=new Uint8Array(l(t));for(e=0;e<t.length;e++)a=t[e],n.set(a.data,i),i+=a.data.byteLength;return n}},n.prototype=new m,i=function(t){var e,a,n=0,r=[];i.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(i){p(t,i),"seq_parameter_set_rbsp"!==i.nalUnitType||e||(e=i.config,t.sps=[i.data],k.forEach(function(a){t[a]=e[a]},this)),"pic_parameter_set_rbsp"!==i.nalUnitType||a||(a=i.data,t.pps=[i.data]),r.push(i)},this.flush=function(){for(var e,a,i,s,o,d;r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0===r.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");e=this.groupNalsIntoFrames_(r),i=this.groupFramesIntoGops_(e),i[0][0].keyFrame||(a=this.getGopForFusion_(r[0],t),a?(i.unshift(a),i.byteLength+=a.byteLength,i.nalCount+=a.nalCount,i.pts=a.pts,i.dts=a.dts,i.duration+=a.duration):i=this.extendFirstKeyFrame_(i)),p(t,i),t.samples=this.generateSampleTable_(i),o=f.mdat(this.concatenateNalData_(i)),this.gopCache_.unshift({gop:i.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],t.baseMediaDecodeTime=u(t),this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),s=f.moof(n,[t]),d=new Uint8Array(s.byteLength+o.byteLength),n++,d.set(s),d.set(o,s.byteLength),this.trigger("data",{track:t,boxes:d}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){h(t),e=void 0,a=void 0},this.getGopForFusion_=function(e){var a,i,n,r,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)r=this.gopCache_[s],n=r.gop,t.pps&&c(t.pps[0],r.pps[0])&&t.sps&&c(t.sps[0],r.sps[0])&&(n.dts<t.timelineStartInfo.dts||(a=e.dts-n.dts-n.duration)>=-1e4&&a<=45e3&&(!i||o>a)&&(i=r,o=a));return i?i.gop:null},this.extendFirstKeyFrame_=function(t){var e;return!t[0][0].keyFrame&&t.length>1&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},this.groupNalsIntoFrames_=function(t){var e,a,i=[],n=[];for(i.byteLength=0,e=0;e<t.length;e++)a=t[e],"access_unit_delimiter_rbsp"===a.nalUnitType?(i.length&&(i.duration=a.dts-i.dts,n.push(i)),i=[a],i.byteLength=a.data.byteLength,i.pts=a.pts,i.dts=a.dts):("slice_layer_without_partitioning_rbsp_idr"===a.nalUnitType&&(i.keyFrame=!0),i.duration=a.dts-i.dts,i.byteLength+=a.data.byteLength,i.push(a));return n.length&&(!i.duration||i.duration<=0)&&(i.duration=n[n.length-1].duration),n.push(i),n},this.groupFramesIntoGops_=function(t){var e,a,i=[],n=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=t[0].pts,i.dts=t[0].dts,n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=t[0].pts,n.dts=t[0].dts,e=0;e<t.length;e++)a=t[e],a.keyFrame?(i.length&&(n.push(i),n.byteLength+=i.byteLength,n.nalCount+=i.nalCount,n.duration+=i.duration),i=[a],i.nalCount=a.length,i.byteLength=a.byteLength,i.pts=a.pts,i.dts=a.dts,i.duration=a.duration):(i.duration+=a.duration,i.nalCount+=a.length,i.byteLength+=a.byteLength,i.push(a));return n.length&&i.duration<=0&&(i.duration=n[n.length-1].duration),n.byteLength+=i.byteLength,n.nalCount+=i.nalCount,n.duration+=i.duration,n.push(i),n},this.generateSampleTable_=function(t,e){var a,i,n,r,s,d=e||0,p=[];for(a=0;a<t.length;a++)for(r=t[a],i=0;i<r.length;i++)s=r[i],n=o(),n.dataOffset=d,n.compositionTimeOffset=s.pts-s.dts,n.duration=s.duration,n.size=4*s.length,n.size+=s.byteLength,s.keyFrame&&(n.flags.dependsOn=2),d+=n.size,p.push(n);return p},this.concatenateNalData_=function(t){var e,a,i,n,r,s,o=0,d=t.byteLength,p=t.nalCount,h=d+4*p,u=new Uint8Array(h),c=new DataView(u.buffer);for(e=0;e<t.length;e++)for(n=t[e],a=0;a<n.length;a++)for(r=n[a],i=0;i<r.length;i++)s=r[i],c.setUint32(o,s.data.byteLength),o+=4,u.set(s.data,o),o+=s.data.byteLength;return u}},i.prototype=new m,p=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))},h=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},u=function(t){var e,a,i=t.minSegmentDts-t.timelineStartInfo.dts;return e=t.timelineStartInfo.baseMediaDecodeTime,e+=i,e=Math.max(0,e),"audio"===t.type&&(a=t.samplerate/9e4,e*=a,e=Math.floor(e)),e},s=function(t,e){this.numberOfTracks=0,this.metadataStream=e,void 0!==t.remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,s.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBoxes.push(t.boxes),
this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track),void("audio"===t.track.type&&(this.audioTrack=t.track)))}},s.prototype=new m,s.prototype.flush=function(t){var e,a,i,n,r=0,s={captions:[],metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return void(++this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,k.forEach(function(t){s.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,_.forEach(function(t){s.info[t]=this.audioTrack[t]},this)),1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,i=f.initSegment(this.pendingTracks),s.initSegment=new Uint8Array(i.byteLength),s.initSegment.set(i),s.data=new Uint8Array(this.pendingBytes),n=0;n<this.pendingBoxes.length;n++)s.data.set(this.pendingBoxes[n],r),r+=this.pendingBoxes[n].byteLength;for(n=0;n<this.pendingCaptions.length;n++)e=this.pendingCaptions[n],e.startTime=e.startPts-o,e.startTime/=9e4,e.endTime=e.endPts-o,e.endTime/=9e4,s.captions.push(e);for(n=0;n<this.pendingMetadata.length;n++)a=this.pendingMetadata[n],a.cueTime=a.pts-o,a.cueTime/=9e4,s.metadata.push(a);s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},r=function(t){var e,a,o=this,p=!0;r.prototype.init.call(this),t=t||{},this.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="aac",e.metadataStream=new g.MetadataStream,e.aacStream=new b,e.audioTimestampRolloverStream=new g.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new g.TimestampRolloverStream("timed-metadata"),e.adtsStream=new y,e.coalesceStream=new s(t,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(t){e.aacStream.setTimestamp(t.timeStamp)}),e.aacStream.on("data",function(t){"timed-metadata"!==t.type||e.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:o.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new n(a),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new g.MetadataStream,r.packetStream=new g.TransportPacketStream,r.parseStream=new g.TransportParseStream,r.elementaryStream=new g.ElementaryStream,r.videoTimestampRolloverStream=new g.TimestampRolloverStream("video"),r.audioTimestampRolloverStream=new g.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new g.TimestampRolloverStream("timed-metadata"),r.adtsStream=new y,r.h264Stream=new S,r.captionStream=new g.CaptionStream,r.coalesceStream=new s(t,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream),r.elementaryStream.pipe(r.videoTimestampRolloverStream).pipe(r.h264Stream),r.elementaryStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.elementaryStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",function(t){var s;if("metadata"===t.type){for(s=t.tracks.length;s--;)e||"video"!==t.tracks[s].type?a||"audio"!==t.tracks[s].type||(a=t.tracks[s],a.timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime):(e=t.tracks[s],e.timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime);e&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new i(e),r.videoSegmentStream.on("timelineStartInfo",function(t){a&&(a.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts))}),r.videoSegmentStream.on("baseMediaDecodeTime",function(t){a&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),a&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new n(a),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream))}}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(t){var i=this.transmuxPipeline_;this.baseMediaDecodeTime=t,a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,h(a),a.timelineStartInfo.baseMediaDecodeTime=t,i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),e&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[],i.videoTimestampRolloverStream.discontinuity()),e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,h(e),e.timelineStartInfo.baseMediaDecodeTime=t),i.timedMetadataTimestampRolloverStream&&i.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.push=function(t){if(p){var e=d(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),p=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){p=!0,this.transmuxPipeline_.headOfPipeline.flush()}},r.prototype=new m,e.exports={Transmuxer:r,VideoSegmentStream:i,AudioSegmentStream:n,AUDIO_PROPERTIES:_,VIDEO_PROPERTIES:k}},{}],13:[function(t,e,a){var i,n,r,s,o,d;i=function(t){return 9e4*t},n=function(t,e){return t*e},r=function(t){return t/9e4},s=function(t,e){return t/e},o=function(t,e){return i(s(t,e))},d=function(t,e){return n(r(t),e)},e.exports={secondsToVideoTs:i,secondsToAudioTs:n,videoTsToSeconds:r,audioTsToSeconds:s,audioTsToVideoTs:o,videoTsToAudioTs:d}},{}],14:[function(t,e,a){"use strict";var i;i=function(t){var e=t.byteLength,a=0,i=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+i},this.loadWord=function(){var n=t.byteLength-e,r=new Uint8Array(4),s=Math.min(4,e);if(0===s)throw new Error("no bytes available");r.set(t.subarray(n,n+s)),a=new DataView(r.buffer).getUint32(0),i=8*s,e-=s},this.skipBits=function(t){var n;i>t?(a<<=t,i-=t):(t-=i,n=Math.floor(t/8),t-=8*n,e-=n,this.loadWord(),a<<=t,i-=t)},this.readBits=function(t){var n=Math.min(i,t),r=a>>>32-n;return i-=n,i>0?a<<=n:e>0&&this.loadWord(),n=t-n,n>0?r<<n|this.readBits(n):r},this.skipLeadingZeros=function(){var t;for(t=0;t<i;++t)if(0!=(a&2147483648>>>t))return a<<=t,i-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},e.exports=i},{}],15:[function(t,e,a){"use strict";var i=function(){this.init=function(){var t={};this.on=function(e,a){t[e]||(t[e]=[]),t[e]=t[e].concat(a)},this.off=function(e,a){var i;return!!t[e]&&(i=t[e].indexOf(a),t[e]=t[e].slice(),t[e].splice(i,1),i>-1)},this.trigger=function(e){var a,i,n,r;if(a=t[e])if(2===arguments.length)for(n=a.length,i=0;i<n;++i)a[i].call(this,arguments[1]);else{for(r=[],i=arguments.length,i=1;i<arguments.length;++i)r.push(arguments[i]);for(n=a.length,i=0;i<n;++i)a[i].apply(this,r)}},this.dispose=function(){t={}}}};i.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},i.prototype.push=function(t){this.trigger("data",t)},i.prototype.flush=function(t){this.trigger("done",t)},e.exports=i},{}]},{},[10]);